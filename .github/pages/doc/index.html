<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>jsstp</title><meta name="description" content="Documentation for jsstp"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/search.js" id="tsd-search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">jsstp</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-content">
<div class="tsd-page-title">
<h2>jsstp</h2></div>
<div class="tsd-panel tsd-typography"><ul>
<li><a href="docs/README_JP.md">JP</a>  </li>
<li><a href="docs/README_EN.md">EN</a>  </li>
<li><a href="docs/README_CN.md">CN</a></li>
</ul>
<a id="md:用法" class="tsd-anchor"></a><h2><a href="#md:用法">用法</a></h2><a id="md:1-引入js" class="tsd-anchor"></a><h3><a href="#md:1-引入js">1. 引入js</a></h3><a id="md:npm" class="tsd-anchor"></a><h4><a href="#md:npm">npm</a></h4><p>如果你使用npm，你可以使用npm安装jsstp</p>
<pre><code class="language-shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">jsstp</span>
</code><button>Copy</button></pre>
<p>之后在js中使用<code>import</code>引入jsstp</p>
<pre><code class="language-javascript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jsstp&quot;</span><span class="hl-1">;</span><br/><span class="hl-5">//或者</span><br/><span class="hl-6">var</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">=(</span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-6">import</span><span class="hl-1">(</span><span class="hl-2">&quot;jsstp&quot;</span><span class="hl-1">)).</span><span class="hl-4">jsstp</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<p>在CommonJS中，你也可以使用<code>require</code>引入jsstp<br>但是由于node的设计原因，你或许需要使用JSDoc注释来声明自<code>require</code>得到的jsstp的类型才能让ide的代码提示正常工作  </p>
<pre><code class="language-javascript"><span class="hl-5">/** </span><span class="hl-6">@type</span><span class="hl-5"> </span><span class="hl-7">{typeof import(&quot;jsstp&quot;).jsstp}</span><span class="hl-5"> */</span><br/><span class="hl-6">var</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">=</span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;jsstp&#39;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:cdn" class="tsd-anchor"></a><h4><a href="#md:cdn">cdn</a></h4><p>或者你是怀旧党，你可以通过cdn访问jsstp的源码</p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">src</span><span class="hl-10">=</span><span class="hl-12">&quot;https://cdn.jsdelivr.net/gh/ukatech/jsstp-lib@v2.0.2.0/dist/jsstp.min.js&quot;</span><span class="hl-8">&gt;&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span>
</code><button>Copy</button></pre>
<p>或者在js中动态载入jsstp</p>
<pre><code class="language-javascript"><span class="hl-6">var</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">=</span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-6">import</span><span class="hl-1">(</span><span class="hl-2">&quot;https://cdn.jsdelivr.net/gh/ukatech/jsstp-lib@v2.0.2.0/dist/jsstp.mjs&quot;</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">m</span><span class="hl-6">=&gt;</span><span class="hl-4">m</span><span class="hl-1">.</span><span class="hl-4">jsstp</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:类型定义" class="tsd-anchor"></a><h5><a href="#md:类型定义">类型定义</a></h5><p>即使使用cdn并手把手编写js代码，你也可以在ide中使用jsstp的类型定义文件以获得代码提示</p>
<p>首先确保你的ide可以访问jsstp，你或许可以全局安装它来在不干扰工作区文件的情况下使用它</p>
<pre><code class="language-shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-6">-g</span><span class="hl-1"> </span><span class="hl-2">jsstp</span>
</code><button>Copy</button></pre>
<p>随后，在使用jsstp的文件头部添加类型导入，根据types约定，这个声明必须在任何正式代码之前</p>
<pre><code class="language-javascript"><span class="hl-5">/// </span><span class="hl-8">&lt;</span><span class="hl-9">reference</span><span class="hl-5"> </span><span class="hl-11">types</span><span class="hl-1">=</span><span class="hl-2">&quot;jsstp&quot;</span><span class="hl-5"> </span><span class="hl-8">/&gt;</span>
</code><button>Copy</button></pre>
<p>最后在jsstp的声明前用JSDoc注释声明其类型</p>
<pre><code class="language-javascript"><span class="hl-5">/** </span><span class="hl-6">@type</span><span class="hl-5"> </span><span class="hl-7">{typeof import(&quot;jsstp&quot;).jsstp}</span><span class="hl-5"> */</span><br/><span class="hl-6">var</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:2-使用" class="tsd-anchor"></a><h3><a href="#md:2-使用">2. 使用</a></h3><p>jsstp现在有专门的文档页面了！<br>你可以访问<a href="https://ukatech.github.io/jsstp-lib/doc">https://ukatech.github.io/jsstp-lib/doc</a>来获取更专业的信息  </p>
<hr>
<p>你可能需要先在jsstp相关操作前检查ghost是否可用  </p>
<pre><code class="language-javascript"><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">available</span><span class="hl-1">())</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;ghost不可用,请检查ghost是否启动&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>jsstp2.0前曾经支持将回调函数作为参数传入，现在已经不再支持<br>如果你需要的话，可以使用<code>Promise</code>或者<code>async</code>/<code>await</code>来获取返回值<br>你可以使用<code>jsstp.SEND</code>来发送报文  </p>
<pre><code class="language-javascript"><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">SEND</span><span class="hl-1">(</span><br/><span class="hl-1">    {</span><span class="hl-5">//事件信息</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;Event&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">&quot;OnTest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;Script&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">&quot;</span><span class="hl-13">\\</span><span class="hl-2">0Hello, World!</span><span class="hl-13">\\</span><span class="hl-2">e&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;head: &quot;</span><span class="hl-1"> + </span><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">head</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-14">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">[</span><span class="hl-2">&quot;Script&quot;</span><span class="hl-1">]);</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>jsstp支持所有的sstp基础操作，<code>jsstp.[SEND|NOTIFY|COMMUNICATE|EXECUTE|GIVE]</code>都可以被调用。<br>如果你喜欢怀旧，只想获得报文本身，你可以使用<code>jsstp.[SEND|NOTIFY|COMMUNICATE|EXECUTE|GIVE].get_raw</code>  </p>
<p>如果你只是想触发事件，而不需要自定义发送较为复杂的报文，可以这样写</p>
<pre><code class="language-javascript"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">OnTest</span><span class="hl-1">(</span><span class="hl-2">&quot;from jsstp.js!&quot;</span><span class="hl-1">, </span><span class="hl-15">123123</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>这等价于：</p>
<pre><code class="language-javascript"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">SEND</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;Event&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">&quot;OnTest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;Reference0&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">&quot;from jsstp.js!&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;Reference1&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-15">123123</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>对于所有事件你都可以这样写，不过如果事件不以<code>On</code>开头，你需要在事件名前加上<code>On_</code>来访问jsstp，这样它才能识别到你想要触发事件<br>你也可以使用<code>jsstp.event.事件名(参数)</code>来触发事件，这样你就不需要在事件名前加上<code>On_</code>了  </p>
<p>在获取到返回内容后，其类型是<code>jsstp.sstp_info_t</code>，使用方法各种各样  </p>
<ul>
<li>以下是自<code>info_object</code>继承的方法</li>
</ul>
<pre><code class="language-javascript"><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">keys</span><span class="hl-1">; </span><span class="hl-5">//获取所有键</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">values</span><span class="hl-1">; </span><span class="hl-5">//获取所有值</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">entries</span><span class="hl-1">; </span><span class="hl-5">//获取所有键值对</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">; </span><span class="hl-5">//获取键值对数量</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">value</span><span class="hl-1">, </span><span class="hl-4">key</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">key</span><span class="hl-1"> + </span><span class="hl-2">&quot;=&quot;</span><span class="hl-1"> + </span><span class="hl-4">value</span><span class="hl-1">)); </span><span class="hl-5">//遍历所有键值对：如果遍历函数有返回值，该值会被更新到此键值对中</span><br/><span class="hl-5">//省略key参数可以只遍历值</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">((</span><span class="hl-4">value</span><span class="hl-1">, </span><span class="hl-4">key</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> + </span><span class="hl-2">&quot;1&quot;</span><span class="hl-1">); </span><span class="hl-5">//遍历所有键值对并返回一个由遍历函数返回值组成的数组</span><br/><span class="hl-5">//省略key参数可以只遍历值</span>
</code><button>Copy</button></pre>
<ul>
<li>以下是自<code>jsstp.base_sstp_info_t</code>继承的方法</li>
</ul>
<pre><code class="language-javascript"><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">status_code</span><span class="hl-1">; </span><span class="hl-5">//获取状态码</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">head</span><span class="hl-1">; </span><span class="hl-5">//获取报文头</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">Script</span><span class="hl-1">; </span><span class="hl-5">//获取报文中的Script键的值（其他键也可以这样获取）</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">status_code_text</span><span class="hl-1">; </span><span class="hl-5">//获取报文头中的状态码文本</span>
</code><button>Copy</button></pre>
<ul>
<li>以下是<code>jsstp.sstp_info_t</code>自有的方法</li>
</ul>
<pre><code class="language-javascript"><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-0">get_passthrough</span><span class="hl-1">(</span><span class="hl-2">&quot;Result&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">//获取报文中`X-SSTP-PassThru`的某个键的值，和`data[&quot;X-SSTP-PassThru-Result&quot;]`等价</span><br/><span class="hl-5">//你也可以直接使用`data.Result`或者`data[&quot;Result&quot;]`来获取`X-SSTP-PassThru-Result`的值：这可能简洁一些</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">passthroughs</span><span class="hl-1">; </span><span class="hl-5">//获取所有`X-SSTP-PassThru`键值对</span><br/><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-4">raw</span><span class="hl-1">; </span><span class="hl-5">//去除代理，访问原始对象</span>
</code><button>Copy</button></pre>
<p><code>sstp_info_t</code>自构造起便被一层代理包裹着，考虑到大多数情况开发者不需要访问非<code>X-SSTP-PassThru</code>键值对，此代理会在你访问某个键而该键存在<code>X-SSTP-PassThru</code>版本时优先返回<code>X-SSTP-PassThru-{key}</code>键的值。<br>换句话说，假若返回的报文有<code>Script</code>键和<code>X-SSTP-PassThru-Script</code>键，那么<code>data.Script</code>或<code>data[&quot;Script&quot;]</code>会返回<code>X-SSTP-PassThru-Script</code>的值，而<code>data.raw.Script</code>和<code>data.raw[&quot;Script&quot;]</code>会返回<code>Script</code>的值。<br>大多数情况下这个代理会减轻你的代码量，而在你需要访问非<code>X-SSTP-PassThru</code>键值对时，请一定记得使用<code>data.raw</code>来访问原始对象。  </p>
<p>如果你想获取ghost是否支持某个事件，可以这样写</p>
<pre><code class="language-javascript"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">has_event</span><span class="hl-1">(</span><span class="hl-2">&quot;OnTest&quot;</span><span class="hl-1">);</span><span class="hl-5">//这和jsstp.event.Has_Event(event_name, security_level).then(({ Result }) =&gt; Result == &quot;1&quot;)几乎一样！</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>如果你想大批量的查询事件（像ukadoc那样！），你可以使用<code>jsstp.new_event_queryer()</code>来获取一个queryer</p>
<pre><code class="language-javascript"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">queryer</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">new_event_queryer</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>queryer的类型是<code>jsstp.ghost_events_queryer_t</code>，使用方法各种各样</p>
<pre><code class="language-javascript"><span class="hl-4">queryer</span><span class="hl-1">.</span><span class="hl-0">check_event</span><span class="hl-1">(</span><span class="hl-2">&quot;OnTest&quot;</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1">));</span>
</code><button>Copy</button></pre>
<p>queryer和<code>jsstp</code>一样，检查事件时有可选的参数指定事件的安全等级，默认的安全等级随着<code>jsstp</code>的运行环境而变化：<br>如果jsstp运行在node.js中，安全等级为<code>local</code>，如果jsstp运行在浏览器中，安全等级为<code>external</code>（因为浏览器中的jsstp只能触发外部事件！）<br>如果你想要固定查询local事件，你需要指定安全等级为<code>local</code>，像这样：  </p>
<pre><code class="language-javascript"><span class="hl-4">queryer</span><span class="hl-1">.</span><span class="hl-0">check_event</span><span class="hl-1">(</span><span class="hl-2">&quot;OnBoot&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;local&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">has_event</span><span class="hl-1">(</span><span class="hl-2">&quot;OnBoot&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;local&quot;</span><span class="hl-1">);</span><span class="hl-5">//使用jsstp的话这样</span>
</code><button>Copy</button></pre>
<p>queryer还支持一些快速检测<br>queryer与构造它的jsstp实例是绑定的，如果你想要让queryer指向特定的ghost，通过设置<code>jsstp.default_info</code>来修改默认的附加报文并使用<code>reset</code>清空缓存  </p>
<pre><code class="language-javascript"><span class="hl-5">//使用fmo中得到的hwnd，这可以避免重名导致的尴尬情况</span><br/><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-4">default_info</span><span class="hl-1">.</span><span class="hl-4">ReceiverGhostHWnd</span><span class="hl-1"> = </span><span class="hl-4">fmo</span><span class="hl-1">[</span><span class="hl-4">uuid</span><span class="hl-1">].</span><span class="hl-4">hwnd</span><span class="hl-1">;</span><span class="hl-5">//fmo的获取方法见下文，这里只是举个例子</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">queryer</span><span class="hl-1">.</span><span class="hl-0">reset</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>如果你确定你的ghost名称足够独特，你也可以直接使用ghost名称，这两个方法只用其中一个就可以了</p>
<pre><code class="language-javascript"><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-4">default_info</span><span class="hl-1">.</span><span class="hl-4">ReceiverGhostName</span><span class="hl-1"> = </span><span class="hl-2">&quot;橘花&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">queryer</span><span class="hl-1">.</span><span class="hl-0">reset</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>queryer还支持一些快速检测用于检查queryer的可用性</p>
<pre><code class="language-javascript"><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">queryer</span><span class="hl-1">.</span><span class="hl-4">available</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">info</span><span class="hl-1">(</span><span class="hl-2">&quot;无法获取支持的事件列表&quot;</span><span class="hl-1">);</span><span class="hl-5">//queryer不可用，你需要提醒用户更新ghost或者向其作者反馈：jsstp和ghost terminal一样使用`Has_Event`事件来检查事件的可用情况。</span><br/><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">queryer</span><span class="hl-1">.</span><span class="hl-4">fast_query_available</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">info</span><span class="hl-1">(</span><span class="hl-2">&quot;无法快速获取支持的事件列表&quot;</span><span class="hl-1">);</span><span class="hl-5">//这不会影响使用，只是会导致查询未缓存的事件时会发出一次查询请求：如果ghost支持`Get_Supported_Events`事件的话queryer会使用它来获取事件列表（这样会快不少！）</span><br/><span class="hl-3">else</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">info</span><span class="hl-1">(</span><span class="hl-2">&quot;好哦&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>如果你想获取fmo信息，可以这样写</p>
<pre><code class="language-javascript"><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">fmo</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">jsstp</span><span class="hl-1">.</span><span class="hl-0">get_fmo_infos</span><span class="hl-1">();</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">fmo</span><span class="hl-1">.</span><span class="hl-4">available</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">fmo</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>fmo的类型是<code>jsstp.fmo_info_t</code>，使用方法各种各样<br><code>fmo_info_t</code>是特化的<code>base_sstp_info_t</code>，所以你可以对其使用<code>base_sstp_info_t</code>的所有方法（也就是说，<code>sstp_info_t</code>的所有方法除了<code>get_passthrough</code>）<br>它还有一些特殊的方法  </p>
<pre><code class="language-javascript"><span class="hl-4">fmo</span><span class="hl-1">.</span><span class="hl-4">uuids</span><span class="hl-1">; </span><span class="hl-5">//获取所有uuid，和`fmo.keys`等价</span><br/><span class="hl-4">fmo</span><span class="hl-1">.</span><span class="hl-0">get_uuid_by</span><span class="hl-1">(</span><span class="hl-2">&quot;fullname&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;Taromati2&quot;</span><span class="hl-1">); </span><span class="hl-5">//获取指定属性值与指定值相等的uuid</span><br/><span class="hl-4">fmo</span><span class="hl-1">.</span><span class="hl-0">get_list_of</span><span class="hl-1">(</span><span class="hl-2">&quot;fullname&quot;</span><span class="hl-1">); </span><span class="hl-5">//获取指定属性的所有值</span><br/><span class="hl-4">fmo</span><span class="hl-1">.</span><span class="hl-4">available</span><span class="hl-1">; </span><span class="hl-5">//获取fmo是否有内容</span>
</code><button>Copy</button></pre>
<p>fmo的每个键值对都是<code>String:info_object</code>，键是uuid，值是该uuid对应的fmo信息<br>你仍然可以使用<code>info_object</code>的成员方法来操作fmo的中的fmo信息（参见上文中对于<code>sstp_info_t</code>的介绍）<br>如果你还是不太理解，可以在控制台查看fmo的结构或者查看jsstp的源码</p>
</div></div>
<div class="col-sidebar">
<div class="page-menu">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)" id="icon-chevronDown"></path></svg>Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>On This Page</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li>
<ul>
<li><a href="#md:用法"><span>用法</span></a></li>
<li>
<ul>
<li><a href="#md:1-引入js"><span>1. 引入js</span></a></li>
<li>
<ul>
<li><a href="#md:npm"><span>npm</span></a></li>
<li>
<ul>
<li><a href="#md:cdn"><span>cdn</span></a></li>
<li>
<ul>
<li><a href="#md:类型定义"><span>类型定义</span></a></li></ul></li></ul></li>
<li><a href="#md:2-使用"><span>2. 使用</span></a></li></ul></li></ul></li></ul></li></ul></div></details></div>
<div class="site-menu">
<nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-namespace)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.33 16V7.24H10.77L13.446 14.74C13.43 14.54 13.41 14.296 13.386 14.008C13.37 13.712 13.354 13.404 13.338 13.084C13.33 12.756 13.326 12.448 13.326 12.16V7.24H14.37V16H12.93L10.266 8.5C10.282 8.692 10.298 8.936 10.314 9.232C10.33 9.52 10.342 9.828 10.35 10.156C10.366 10.476 10.374 10.784 10.374 11.08V16H9.33Z" fill="var(--color-text)"></path></g></svg><span>jsstp</span></a>
<ul class="tsd-small-nested-navigation">
<li><a href="modules.html#default"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-8388608"><rect fill="var(--color-icon-background)" stroke="#FF4D82" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M10.354 17V8.24H13.066C13.586 8.24 14.042 8.348 14.434 8.564C14.826 8.772 15.13 9.064 15.346 9.44C15.562 9.816 15.67 10.256 15.67 10.76C15.67 11.352 15.514 11.86 15.202 12.284C14.898 12.708 14.482 13 13.954 13.16L15.79 17H14.518L12.838 13.28H11.434V17H10.354ZM11.434 12.308H13.066C13.514 12.308 13.874 12.168 14.146 11.888C14.418 11.6 14.554 11.224 14.554 10.76C14.554 10.288 14.418 9.912 14.146 9.632C13.874 9.352 13.514 9.212 13.066 9.212H11.434V12.308Z" fill="var(--color-text)"></path></g></svg><span>default</span></a></li>
<li><a href="modules/_internal_.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>&lt;internal&gt;</span></a></li>
<li><a href="classes/base_sstp_info_t.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-128"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-class)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.898 16.1201C11.098 16.1201 10.466 15.8961 10.002 15.4481C9.53803 15.0001 9.30603 14.3841 9.30603 13.6001V9.64012C9.30603 8.85612 9.53803 8.24012 10.002 7.79212C10.466 7.34412 11.098 7.12012 11.898 7.12012C12.682 7.12012 13.306 7.34812 13.77 7.80412C14.234 8.25212 14.466 8.86412 14.466 9.64012H13.386C13.386 9.14412 13.254 8.76412 12.99 8.50012C12.734 8.22812 12.37 8.09212 11.898 8.09212C11.426 8.09212 11.054 8.22412 10.782 8.48812C10.518 8.75212 10.386 9.13212 10.386 9.62812V13.6001C10.386 14.0961 10.518 14.4801 10.782 14.7521C11.054 15.0161 11.426 15.1481 11.898 15.1481C12.37 15.1481 12.734 15.0161 12.99 14.7521C13.254 14.4801 13.386 14.0961 13.386 13.6001H14.466C14.466 14.3761 14.234 14.9921 13.77 15.4481C13.306 15.8961 12.682 16.1201 11.898 16.1201Z" fill="var(--color-text)"></path></g></svg><span>base_<wbr/>sstp_<wbr/>info_<wbr/>t</span></a></li>
<li><a href="classes/ghost_events_queryer_t.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-128"></use></svg><span>ghost_<wbr/>events_<wbr/>queryer_<wbr/>t</span></a></li>
<li><a href="classes/jsstp_t.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-128"></use></svg><span>jsstp_<wbr/>t</span></a></li>
<li><a href="types/fmo_info_t.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4194304"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-type-alias)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)"></path></g></svg><span>fmo_<wbr/>info_<wbr/>t</span></a></li>
<li><a href="types/sstp_info_t.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4194304"></use></svg><span>sstp_<wbr/>info_<wbr/>t</span></a></li>
<li><a href="variables/fmo_info_t-1.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-32"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-variable)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.106 16L8.85 7.24H9.966L11.454 13.192C11.558 13.608 11.646 13.996 11.718 14.356C11.79 14.708 11.842 14.976 11.874 15.16C11.906 14.976 11.954 14.708 12.018 14.356C12.09 13.996 12.178 13.608 12.282 13.192L13.758 7.24H14.85L12.582 16H11.106Z" fill="var(--color-text)"></path></g></svg><span>fmo_<wbr/>info_<wbr/>t</span></a></li>
<li><a href="variables/jsstp.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-32"></use></svg><span>jsstp</span></a></li>
<li><a href="variables/sstp_info_t-1.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-32"></use></svg><span>sstp_<wbr/>info_<wbr/>t</span></a></li></ul></nav></div></div></div>
<div class="tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div></body></html>